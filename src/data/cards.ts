import { Card, GameState, ELEMENT, TARGET_TYPE, CARD_DESTINATION, SELECTION_MODE } from '../types/game';

const noop = (s: GameState) => s;

export const DEBATE_DECK: Card[] = [
  // ==================== WATER (Card & Deck Manipulation) ====================
  // Water is about flow, adaptation, and controlling the pace of the debate
  { id: 'wa1', name: 'Flowing Ink', element: ELEMENT.WATER, patienceCost: 1, faceCost: 0,
    description: ['Draw ', { value: 1 }, ' card.'],
    effect: noop,
    effects: [{ type: 'draw_cards', count: 1 }],
  },
  { id: 'wa2', name: 'Turbulent Flow', element: ELEMENT.WATER, patienceCost: 2, faceCost: 0,
    description: ['Discard a card, then draw ', { value: 3 }, ' cards.'],
    effect: noop,
    targetRequirement: {
      type: TARGET_TYPE.HAND_CARD,
      destination: CARD_DESTINATION.DISCARD,
      selectionMode: SELECTION_MODE.CHOOSE,
      filter: (c, _state) => c.id !== 'wa2',
      isPlayRequirement: true,
      prompt: 'Choose a card to discard',
    },
    targetedEffects: [{ type: 'draw_cards', count: 3 }],
  },

  // ==================== WOOD (Timed Effects) ====================
  // Wood grows slowly - effects that build over time
  { id: 'w1', name: 'Growing Roots', element: ELEMENT.WOOD, patienceCost: 2, faceCost: 0,
    description: ['Gain ', { value: 5 }, ' Standing at end of turn for ', { value: 3, noDouble: true }, ' turns.'],
    effect: noop,
    effects: [{ type: 'add_status', templateId: 'growing_roots', duration: 3 }],
  },
  { id: 'w2', name: 'Thick Bark', element: ELEMENT.WOOD, patienceCost: 3, faceCost: 0,
    description: ['Gain ', { value: 5 }, ' Composure at the end of turn for ', { value: 3, noDouble: true }, ' turns.'],
    effect: noop,
    effects: [{ type: 'add_status', templateId: 'thick_bark', duration: 3 }],
  },
  { id: 'w3', name: 'Regeneration', element: ELEMENT.WOOD, patienceCost: 2, faceCost: 0,
    description: ['Heal ', { value: 3 }, ' Face at start of turn for ', { value: 4, noDouble: true }, ' turns.'],
    effect: noop,
    effects: [{ type: 'add_status', templateId: 'regeneration', duration: 4 }],
  },

  // ==================== FIRE (High Cost, Card Burning, Remove from Play) ====================
  // Fire burns bright but consumes - powerful effects that cost face and can discard cards
  { id: 'f1', name: 'Purifying Flames', element: ELEMENT.FIRE, patienceCost: 1, faceCost: 0,
    description: ['Burn a card. Gain Standing equal to its Patience cost x', { value: 5 }, '.'],
    effect: noop,
    targetRequirement: {
      type: TARGET_TYPE.HAND_CARD,
      destination: CARD_DESTINATION.BURN,
      selectionMode: SELECTION_MODE.CHOOSE,
      filter: (c, _state) => c.id !== 'f1',
      isPlayRequirement: true,
      prompt: 'Choose a card to burn for Standing',
    },
    targetedEffects: [{
      type: 'computed',
      compute: { type: 'target_patience_cost', multiplier: 5 },
      effectTemplate: { type: 'gain_standing', value: 0 },
    }],
  },
  { id: 'f2', name: 'Volcanic Fury', element: ELEMENT.FIRE, patienceCost: 1, faceCost: 10,
    description: ['Deal ', { value: 20 }, ' Shame.'],
    effect: noop,
    targetRequirement: { type: TARGET_TYPE.OPPONENT },
    targetedEffects: [{ type: 'deal_shame', value: 20, target: 'selected_opponent' }],
  },
  { id: 'f3', name: 'Cleansing Fire', element: ELEMENT.FIRE, patienceCost: 1, faceCost: 0,
    description: ['Burn a card from hand. Gain ', { value: 5 }, ' Composure.'],
    effect: noop,
    targetRequirement: {
      type: TARGET_TYPE.HAND_CARD,
      destination: CARD_DESTINATION.BURN,
      selectionMode: SELECTION_MODE.CHOOSE,
      filter: (c, _state) => c.id !== 'f5',
      isPlayRequirement: true,
      prompt: 'Choose a card to burn for Composure',
    },
    targetedEffects: [{ type: 'gain_poise', value: 5 }],
  },
  { id: 'f4', name: 'Wildfire', element: ELEMENT.FIRE, patienceCost: 1, faceCost: 5,
    description: ['Burn a random card from hand. Deal ', { value: 30 }, ' Shame.'],
    effect: noop,
    targetRequirement: { type: TARGET_TYPE.OPPONENT },
    targetedEffects: [
      { type: 'burn_card', source: 'random', filter: { excludeCardId: 'f4' } },
      { type: 'deal_shame', value: 30, target: 'selected_opponent' },
    ],
  },

  // ==================== METAL (Reveal, Board Effects, Intention Modifiers) ====================
  // Metal is sharp and precise - defensive effects and information control
  { id: 'm1', name: 'Mirror Polish', element: ELEMENT.METAL, patienceCost: 1, faceCost: 0,
    description: ['Reveal ', { value: 1 }, ' opponent intention.'],
    effect: noop,
    targetRequirement: { type: TARGET_TYPE.OPPONENT },
    targetedEffects: [{ type: 'reveal_intention', count: 1, target: 'selected_opponent' }],
  },
  { id: 'm2', name: 'Silver Tongue', element: ELEMENT.METAL, patienceCost: 1, faceCost: 3,
    description: ['Gain ', { value: 8 }, ' Standing, reveal ', { value: 1 }, ' intention.'],
    effect: noop,
    effects: [{ type: 'gain_standing', value: 8 }],
    targetRequirement: { type: TARGET_TYPE.OPPONENT },
    targetedEffects: [{ type: 'reveal_intention', count: 1, target: 'selected_opponent' }],
  },
  { id: 'm5', name: 'Gilded Edge', element: ELEMENT.METAL, patienceCost: 1, faceCost: 4,
    description: ['Gain ', { value: 10 }, ' Standing.'],
    effect: noop,
    effects: [{ type: 'gain_standing', value: 10 }],
  },
  { id: 'm6', name: 'Keen Observation', element: ELEMENT.METAL, patienceCost: 1, faceCost: 4,
    description: ['Gain ', { value: 5 }, ' Standing and deal ', { value: 10 }, ' Shame.'],
    effect: noop,
    effects: [{ type: 'gain_standing', value: 5 }],
    targetRequirement: { type: TARGET_TYPE.OPPONENT },
    targetedEffects: [{ type: 'deal_shame', value: 10, target: 'selected_opponent' }],
  },

  // ==================== EARTH (Composure Specialist) ====================
  // Earth is stable and grounded - the best source of composure
  { id: 'e1', name: 'Mountain Stance', element: ELEMENT.EARTH, patienceCost: 1, faceCost: 0,
    description: ['Gain ', { value: 3 }, ' Composure.'],
    effect: noop,
    effects: [{ type: 'gain_poise', value: 3 }],
  },
  { id: 'e2', name: 'Steady Ground', element: ELEMENT.EARTH, patienceCost: 2, faceCost: 0,
    description: ['Gain ', { value: 8 }, ' Composure.'],
    effect: noop,
    effects: [{ type: 'gain_poise', value: 8 }],
  },
];
